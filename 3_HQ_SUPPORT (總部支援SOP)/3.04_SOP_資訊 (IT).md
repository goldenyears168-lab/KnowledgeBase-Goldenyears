3.04_SOP_資訊 
1. SOP 總覽 
1.1 手冊目的與核心原則
• 目的 : 本手冊是「好時有影」組織所有「數位系統」的維護、治理、與安全SOP。本手冊的目標是確保組織的資訊系統100% 穩定、自動、且安全。
• 核心原則 :
    ◦ 穩定 : 系統永不中斷。SOP_服務補救 手冊的備援SOP永遠待命。
    ◦ 自動 : GAS腳本 是「企業流程的執行工具」。GAS 作為 Google 系統管理中心，持續優化，減少人工介入。
    ◦ 安全 : 夥伴的權限永遠是「最小可行權限」。
1.2 適用範圍
• 本SOP適用於執行長  以及未來接管 資 (資訊) 功能的核心夥伴（例如 自動化夥伴）。
1.3 權責單位
• SOP 擁有者 : 執行長 。
• SOP 備援人 : (依「7.1 雙管理人制度」指定，例如 店長 )。
1.4 關鍵SOP：資訊治理週期 
• (本條為組織數位資產的最高治理原則)
• 1.4.1 雙月檢討會議 
    ◦ 召開者： 執行長 。
    ◦ 議程： 檢討系統架構、GAS腳本錯誤率、安全性、權限設定、新功能開發進度。
• 1.4.2 版本命名規範 
    ◦ SOP： 所有組織的SOP手冊或系統的重大改動，必須標示版本號。
    ◦ 範例： 「📄 1.01_SOP工作室產品手冊.md」(2025Q1)、後台資訊系統。
• 1.4.3 變更記錄 
    ◦ SOP： 所有關鍵系統（後台資訊系統、GAS腳本）的結構性變更，必須被記錄。（詳見 3.3）。
• 1.4.4 季度檢討會議優化 
    ◦ **目的：** 簡化季度檢討會議流程，改為重點檢討模式，僅檢討異常項目和關鍵決策，提升會議效率。
    ◦ **核心原則：** 日常審核由店長負責，季度檢討僅處理戰略性決策和異常項目。
    ◦ **會議前準備（儀表板預檢）：**
        ▪ 執行長在會議前 3 天，先檢視所有儀表板和關鍵指標
        ▪ 自動化夥伴提前 3 天提供「季度檢討摘要」，包含：
            • 關鍵指標異常項目清單
            • 需要決策的事項清單
            • 系統健康度摘要
            • 研發專案異常清單（來自創新雷達表）
        ▪ 執行長根據摘要報告，決定會議議程和重點討論項目
    ◦ **會議模式（重點檢討）：**
        ▪ 僅檢討異常項目和關鍵決策，不重複日常審核內容
        ▪ 議程時間控制在 60-90 分鐘內
        ▪ 議程結構：
            1. 異常項目檢討（30分鐘）： 僅檢討關鍵指標異常、系統異常、需要決策的事項
            2. 戰略決策（30分鐘）： 研發專案決策、系統架構調整、預算調整
            3. 行動計劃（30分鐘）： 制定下季度重點工作計劃
    ◦ **分層檢討機制：**
        ▪ 日常審核： 由店長負責，處理日常營運審核
        ▪ 雙月檢討： 由執行長負責，檢討系統健康度和技術問題
        ▪ 季度檢討： 由執行長負責，僅處理戰略性決策和異常項目
    ◦ **效益目標：** 透過重點檢討模式，將季度檢討會議時間從 2-3 小時縮短至 60-90 分鐘
2. 系統架構總覽 
2.1 資訊流地圖 
• 標準資訊流程：
    1. 客戶 於 Simplybook 預約。
    2. Simplybook 觸發 GAS腳本 。
    3. GAS腳本 自動在 後台資訊系統   建立一筆新紀錄。
    4. 副攝  在「階段 1」讀取此紀錄並「核對」。
    5. 副攝  在「階段 3」更新此紀錄（五星標記、店內備註、收款金額）。
    6. 修圖師  在「階段 5」讀取此紀錄，並更新 edited photo link 與 祝福小語。
    7. 修圖師 （或 GAS腳本）讀取此紀錄，寄送交件 Email 給客戶。
2.2 核心系統清單
• (本清單來自「官方詞彙表 」)
• 後台資訊系統 
    ◦ 定位： 組織 的「資訊系統 」。專案SOP的唯一事實來源。
    ◦ 工具： Google Sheet。
• Simplybook
    ◦ 定位： 客戶「前端預約」入口。
    ◦ 工具： 第三方SaaS服務。
• GAS (自動化腳本)
    ◦ 定位： 組織 的「Google 系統管理中心」，專注 Google 服務內的操作與數據處理。
    ◦ 工具： Google Apps Script。
    ◦ 負責範圍： Google Sheets 數據操作、Simplybook → 後台資訊系統同步、Gmail 內部通知、Google Drive 文件管理。
    ◦ 優勢： 直接操作 Google 服務，效能最佳，與 Google 服務深度整合。
• 好時有影總部 
    ◦ 定位： 組織 的「資料庫 」。
    ◦ 工具： Google Drive。
3. 後台資訊系統  管理SOP
(本章節管理組織最關鍵的核心資產：Google Sheet 資料庫)
3.1 資料庫結構 
• (本章節應詳細說明 後台資訊系統 中，主要的工作表  / 欄位群組的用途與關聯)
• 範例：
    ◦ [工作表 1：V9_Studio_Jobs] (存放所有「📄 1.01_SOP工作室產品手冊.md」專案紀錄)
    ◦ [工作表 2：V10_Workshop_Jobs] (存放所有 SOP_一日攝影師 專案紀錄)
    ◦ [工作表 3：Partner_DB] (存放所有夥伴的分潤比例與稅籍資料)
3.2 欄位與公式維護SOP
• 核心原則： 嚴禁任意新增、刪除、或移動欄位，這會立即導致 GAS腳本 崩潰。
• SOP：
    1. 需求來源： 來自「SOP_研發」的「開發排程」。
    2. 修改SOP：
        ▪ (新增欄位)：必須新增在工作表的「最後一欄 (Z欄)之後」。
        ▪ (修改公式)：若「SOP_財務」的分潤規則改變，執行長  必須在此處更新計算公式
        ▪ (資料驗證)：所有關鍵欄位（例如 副攝 填寫的 狀態）必須使用「資料驗證」下拉選單，嚴禁手動輸入字串。
3.3 變更記錄SOP
• 目的： 確保所有「後台資訊系統」的重要結構變更都被記錄。
• SOP：
    1. 重要變更（如新增或刪除關鍵欄位）需簡單記錄。
    2. 執行長  在執行任何「3.2 欄位與公式維護SOP」後，必須根據變更分類決定記錄方式。
    3. **變更分類標準：**
        ▪ **重大變更（必須詳細記錄）：**
            • 新增或刪除工作表
            • 新增或刪除關鍵欄位（影響GAS腳本或公式的欄位）
            • 修改核心公式（例如：分潤計算公式）
            • 修改系統架構（例如：新增資料表關聯）
            • 記錄格式： 日期 | 修改者 | 變更類型（重大） | 變更描述（詳細） | 原因 | 影響範圍
        ▪ **一般變更（簡化記錄）：**
            • 新增非關鍵欄位（不影響GAS腳本或公式）
            • 修改欄位格式或驗證規則
            • 調整欄位順序
            • 記錄格式： 日期 | 修改者 | 變更類型（一般） | 變更描述（簡要） | 原因
        ▪ **微小調整（可批次記錄）：**
            • 修正錯字或格式
            • 調整欄位寬度
            • 修改註解或說明文字
            • 記錄方式： 可每月彙整記錄一次，格式為「[月份] 微小調整彙整：修正錯字X處、調整格式Y處」
    4. **自動化記錄機會：**
        ▪ 系統變更可透過自動化工具記錄（例如：GAS腳本自動記錄部署時間和版本號）
        ▪ 公式變更可透過版本控制工具追蹤
        ▪ 減少人工記錄負擔，提升記錄準確性
    5. **記錄原則：**
        ▪ 重大變更： 必須在變更後 24 小時內記錄
        ▪ 一般變更： 必須在變更後 7 天內記錄
        ▪ 微小調整： 可每月彙整記錄一次
        ▪ 所有記錄都必須包含「變更類型」欄位，便於後續查詢和審核
4. GAS (自動化腳本) 管理SOP
(本章節管理組織的「Google 系統管理中心」，GAS腳本專注 Google 服務內的操作與數據處理。所有 GAS 腳本的開發、維護與優化由總部自動化夥伴負責執行，執行長負責管理與策略制定。)
4.1 腳本儲存庫 
• SOP： 所有的GAS腳本必須儲存在「好時有影總部 」Google Drive 中指定的「GAS 專案資料夾」內。
4.2 腳本功能清單 & 命名規範
• 目的： 確保所有腳本功能清晰、易於維護。
• SOP： 必須遵循「功能_模組_版本.gs」的命名規範。
• 功能清單 (範例)：
• SOP： 嚴禁在 GAS腳本 中撰寫「一次性」或「用途不明」的腳本。
4.3 部署與更新SOP
• SOP：
    1. 開發： 應在「測試用」的 後台資訊系統  (副本) 上開發與測試新腳本。
    2. 部署： 測試通過後，總部自動化夥伴（需執行長   審批）才能將新版本部署到「正式環境」的 GAS腳本 專案中。
    3. 觸發器 ： 必須檢查「觸發器」（例如 onFormSubmit）是否已正確設定為在新版本上執行。
    4. 記錄： 重要變更需記錄在簡單的變更記錄中。
4.4 錯誤排查  SOP
• SOP：
    1. 監控： 總部自動化夥伴必須定期（例如：每週）檢查 GAS腳本 專案的「執行紀錄」。
    2. 排查： 若發現「失敗」紀錄，需立即點開「記錄」，查看錯誤訊息，並對應程式碼進行修正。
4.5 關鍵SOP：GAS 更動通報
• 目的： 確保所有GAS腳本的變更都是可追蹤的。
• SOP：
    1. 在所有「關鍵腳本」程式碼末端，必須加入「自動寄信通知」的程式碼。
    2. 通知SOP： 當腳本「成功部署」或「執行發生重大錯誤」時，會自動寄信到 執行長  與總部自動化夥伴的指定信箱（例如：ystem@haoshistudio.com）。
    3. 信件內容範例： 「GAS腳本 [腳本名稱] 已於 [時間] 由 [執行者] 更新/部署完畢。影響模組：[模組名稱]。」
4.6 與總部自動化夥伴的協作
• 職責分工：
    ◦ 總部自動化夥伴負責：
        ▪ GAS 腳本的設計、開發、部署與維護。
        ▪ 日常監控與錯誤排查。
        ▪ 自動化流程優化。
    ◦ 執行長   負責：
        ▪ 自動化系統的規劃、策略制定、資源分配。
        ▪ 重大變更審批。
        ▪ 系統架構決策。
• 協作頻率：
    ◦ 每日： 總部自動化夥伴提供腳本與工作流執行狀態報告（如有異常）。
    ◦ 每週： 策略檢討與優化進度報告。
    ◦ 每月： 效能評估與優化建議。
    ◦ 每季： 與資訊治理季度檢討會議整合，檢討自動化系統整體表現。
5. Simplybook (預約系統) 管理SOP
(本章節管理組織的「客戶流量入口」。)
5.1 新增/修改服務SOP
• SOP：
    1. 需求來源： 來自「SOP_研發 」的「產品開發票據 」。
    2. 執行： 執行長   登入 Simplybook 後台。
    3. 建立服務： 建立新服務（例如 SOP_一日攝影師），必須包含：服務名稱、描述、價格、所需時間、對應的攝影夥伴資源。
    4. (關鍵) 確保新服務已正確連結到「金流」與「GAS腳本觸發器」（如有使用）。
    ◦ n8n = 外部整合工具：專注 Google 系統外的整合與通知
    ◦ 兩者協作互補，而非取代關係
• 明確分工：
    ◦ GAS 負責：
        ▪ Google Sheets 數據寫入/讀取（後台資訊系統核心操作）
        ▪ Simplybook → 後台資訊系統同步（寫入 Google Sheets）
        ▪ Google Drive 文件管理
        ▪ Gmail 內部通知（給執行長、內部夥伴）
        ▪ 作為數據中心，觸發 n8n 進行外部通知
    ◦ n8n 負責：
        ▪ LINE 通知（異常通知）
        ▪ 社群媒體自動化（IG/FB 內容排程、互動監控）
            • 必要性： 根據 📄 3.01_SOP_行銷 .md 與 📄 2.11_Spec_店長.md，店長需要進行日常社群媒體經營，包括內容產製、發布、互動回應。目前使用 Meta Business Suite 手動排程，若能透過 n8n 自動化，可大幅節省時間。此外，行銷 SOP 要求每日監測 IG/FB 標註、12 小時內回應留言，這些都可以透過 n8n 自動化監控，標記需要人工處理的訊息。
        ▪ 第三方服務整合
            • 社群平台服務（IG/FB）： 用於內容排程與互動監控
            • AI 工具服務（ChatGPT、Claude）： 用於內容生成、自動回覆、數據分析（詳見 📄 2.02_Spec_自動化夥伴）
            • 其他外部 SaaS： 依實際需求評估，避免過度規劃
        ▪ 跨平台數據收集與同步
            • 必要性： 根據 📄 2.02_Spec_自動化夥伴 .md，自動化夥伴需要自動收集並彙整社群媒體數據、SEO 排名監控數據、獲客成本計算基礎數據等。這些數據來自多個外部平台（IG/FB、SEO 工具），需要透過 n8n 整合收集後，同步到後台資訊系統（由 GAS 寫入），讓店長與執行長能夠檢視完整的行銷成效報告。
• 協作機制：
    ◦ GAS → n8n： GAS 完成內部處理後，透過自動觸發機制通知 n8n 進行外部通知
    ◦ n8n → GAS： n8n 收集外部數據後，透過自動觸發機制通知 GAS 更新後台資訊系統
    ◦ 並行執行： 同一事件可同時觸發 GAS 與 n8n，分別處理內部與外部流程
• 技術優勢（各取所長）：
    ◦ GAS 優勢：
        ▪ 直接操作 Google Sheets，效能最佳
        ▪ 與 Google 服務深度整合，無需 API 認證
        ▪ 適合複雜的數據處理與公式計算
        ▪ 成本低（Google Workspace 內建）
    ◦ n8n 優勢：
        ▪ 豐富的第三方服務整合（社群平台服務、AI 工具服務）
        ▪ 視覺化工作流設計，維護容易
        ▪ 更好的錯誤處理與監控機制
        ▪ 支援複雜的條件判斷與邏輯處理
• 遷移策略調整：
    ◦ 不再全面遷移 GAS 至 n8n
    ◦ 保留 GAS 在 Google 系統內的優勢
    ◦ 新增 n8n 處理外部整合需求
    ◦ 兩者長期共存，協作互補
5.2 夥伴排班管理SOP
• SOP：
    1. 資料來源： 店長  提供 攝影夥伴 / 彩妝夥伴 的「可排班時段表」。
    2. 執行： 執行長   或授權的 店長，登入 Simplybook 後台，設定「服務提供者」（夥伴）的「工作時間」。
    3. (重要) 確保排班時間與「📄 1.01_SOP工作室產品手冊.md」的營運時間一致。
6. 安全與權限管理SOP
6. 安全與權限管理SOP 
(本章節是組織的「數位鎖頭」，執行長的最高職責之一。)
7.1 新夥伴權限SOP
• 核心原則：最小可行權限 。
• SOP：
    1. 依據： 執行長   必須依照「📄 3.02_SOP_人才 .md」的權限設定執行授權。
    2. 副攝  範例：
        ▪ 後台資訊系統 -> 編輯權限 (僅限當前分店的工作表)。
        ▪ 好時有影總部  -> 檢視權限 (僅限總綱文件, 「📄 1.01_SOP工作室產品手冊.md」, 「📄 3.07_SOP_服務補救 .md」)。
        ▪ Simplybook -> 無權限。
        ▪ n8n 平台 -> 無權限。
    3. 攝影師  範例：
        ▪ 後台資訊系統 -> 檢視權限 (僅限查看排班與 店內備註)。
        ▪ 好時有影總部  -> 檢視權限 (同上)。
        ▪ n8n 平台 -> 無權限。
7.2 夥伴 Offboarding 權限SOP
• 目的： 確保夥伴停止合作時，資訊存取權限被完整移除。
• 觸發： 店長  向 執行長  提出「夥伴停止合作」通知。
• SOP：
    ◦ 執行長   必須在 24 小時內，執行以下動作：
        1. 移除 後台資訊系統 的所有權限。
        2. 移除 好時有影總部  的所有權限。
        3. 停用 Simplybook 帳號（若有）。
        4. 停用 G Suite / 公司 Email（若有）。
        5. 從所有相關 LINE 群組中移除。
        6. 移除 n8n 平台的所有權限（如有）。
7.3 關鍵SOP：緊急撤權流程 
• 目的： 處理高風險事件（例如：夥伴帳號異常、惡意行為、或離職未通報）。
• 觸發： 執行長  或 店長  發現異常，立即觸發。
• SOP：
    ◦ 執行長   必須在 1 小時內，優先執行「7.2 夥伴 Offboarding 權限SOP」中的所有撤權動作。
7.4 權限定期審核SOP
• SOP：
    1. 執行長   在「資訊治理季度檢討會議」(見 1.4) 上，必須審核權限設定。
    2. 審核內容：
        ▪ 後台資訊系統 的「共享」清單，移除所有「非必要」的外部人員。
        ▪ Google Drive 的「共享」清單。
        ▪ 檢查是否有夥伴權限「過高」（例如：副攝 擁有了「管理員」權限）。
        ▪ n8n 平台的權限清單，確認只有總部自動化夥伴與執行長有管理權限。
7.5 好時有影總部  架構維護SOP
• SOP：
    1. 新增SOP手冊/角色規範： 執行長  必須遵循 「扁平化」架構與「語義化命名」（1.1_...、2.01_...）規則。
    2. 歸檔  SOP：
        ▪ 過時的SOP（例如舊版「📄 1.01_SOP工作室產品手冊.md」）不可刪除。
        ▪ 應在 📁 1_CLIENT_PROJECTS 中建立一個 _Archive 資料夾，將舊版SOP移入，以保留歷史紀錄。
8. 備援與災難復原SOP 
(本章節是確保組織在執行長  或系統本身發生狀況時，仍能持續運作的「保險SOP」。)
7.1 關鍵SOP：雙管理人制度 
• 目的： 消除「單點故障 」。確保組織的每一個關鍵系統，都至少有「主責人」與「備援人」兩人熟悉。
• SOP：
    1. 執行長   必須維護「雙管理人清單 」。
    2. 清單範例：
        ▪ 系統： 後台資訊系統 
        ▪ 主責人 ： 執行長 
        ▪ 備援人 ： 店長 
        ▪ 系統： Simplybook
        ▪ 主責人 ： 執行長 
        ▪ 備援人 ： 店長 
    3. 執行長  有義務確保「備援人」擁有必要的「存取權限」與「基礎SOP知識」（例如：半年演練）。
7.2 資料備份SOP
• 目的： 確保所有關鍵資料在遺失時，都能快速還原。
• SOP：
    ◦ 1. 後台資訊系統  ：
        ▪ 方式： Google Sheet 本身具有強大的「版本紀錄」。
        ▪ SOP： 執行長   必須在執行「重大變更」（例如：GAS腳本修改、欄位結構調整）之前，執行「檔案 -> 建立副本」，建立一個「[系統名稱]備份[YYYYMMDD]」的副本。
    ◦ 2. GAS (自動化腳本)：
        ▪ 方式： 自動備份至 好時有影總部   或 GitHub。
        ▪ SOP： 執行長   在部署新版本 (見 4.3) 時，必須將「.gs」程式碼檔案複製並儲存至指定的「腳本備份」資料夾。
    ◦ 3. n8n 工作流：
        ▪ 方式： n8n 平台本身具有版本控制與匯出功能。
        ▪ SOP： 總部自動化夥伴在部署新工作流或重大更新時，必須匯出工作流 JSON 檔案並儲存至 好時有影總部   的「n8n 工作流備份」資料夾。
    ◦ 4. 好時有影總部  ：
        ▪ 方式： 使用 Google Drive 本身的雲端機制。
        ▪ SOP： 執行長   需定期（例如：每季）檢查「垃圾桶」，確保沒有SOP手冊被意外刪除。
8.3 關鍵SOP：資料還原演練 
• 目的： 確保「8.2 資料備份SOP」是真正有效的。
• 執行者： 執行長   + 「備援人」（例如 店長 ）。
• 頻率： 每年 1 次（或依實際需求調整）。
• SOP：
    1. 宣布演練： 執行長  向「備援人」宣布演練開始。
    2. 演練情境： (範例) 「後台資訊系統 遭到惡意刪除，請立即從昨天的備份還原。」
    3. 執行： 「備援人」必須在 執行長  的監督下，實際執行「8.2 資料備份SOP」中的還原流程。
    4. (重要) 嚴禁在「正式環境」演練。必須將備份還原至一個「測試用」的新 Google Sheet 中。
    5. 驗證： 檢查「測試用」Sheet 的資料完整性、公式是否正常運作。
8.4 關鍵SOP：自動化系統技術備援 
• 目的： 確保核心系統（GAS/n8n）在自動化夥伴  缺席時仍能被監控或恢復，消除自動化系統的單點故障風險。
• 核心原則： 執行長需了解系統架構，技術修復由自動化夥伴或外部支援負責。
• SOP：
    1. 技術備援角色定義：
        ▪ 執行長  ： 主責系統架構決策與緊急應變協調
        ▪ 店長 ： 協助檢查系統狀態與異常通知
    2. 系統操作手冊維護：
        ▪ 執行長   必須維護「自動化系統操作手冊」，包含：
            • GAS 腳本列表（功能說明、觸發器設定、常見錯誤處理）
            • n8n 工作流清單（功能說明、觸發條件、常見錯誤處理）
            • 系統架構圖（GAS 與 n8n 的協作流程）
            • 緊急聯絡資訊（自動化夥伴的聯絡方式、外部技術支援聯絡方式）
        ▪ 該手冊必須存放在「好時有影總部 」Google Drive 中，供備援人隨時查閱
    3. 緊急應變流程：
        ▪ 當自動化夥伴因故無法工作時：
            1. 執行長立即協調系統監控工作
            2. 每週檢視自動化夥伴提供的系統健康報告（若自動化夥伴缺席，由執行長協調外部技術支援提供）
            3. 識別並記錄所有系統錯誤
            4. 若發現關鍵錯誤（影響營運的錯誤），立即協調自動化夥伴或外部技術支援處理
            5. 店長協助檢查營運報表是否正常生成，並回報異常
            6. 自動化夥伴恢復工作後，交接所有異常記錄與處理狀況
• 協作機制：
    ◦ 執行長   負責： 系統架構維護、緊急應變決策、協調技術支援
    ◦ 店長  負責： 系統狀態檢查、異常通知
    ◦ 自動化夥伴  負責： 技術執行、技術文件更新、技術能力傳授
9. 系統維運SOP 
(本章節是確保系統「日常」穩定運作的SOP。)
9.1 系統檢查SOP
• 目的： 定期檢查系統運作狀況。
• 執行者： 執行長  。
• 頻率： 每月 1 次。
• SOP： 執行長  必須在每月指定日期，進行簡單的系統檢查。
• 檢查項目 ：
    ◦ [ ] GAS腳本 失敗紀錄：檢查是否有失敗紀錄，如有需排查解決。
    ◦ [ ] Simplybook 與 後台資訊系統 資料對齊：抽查最近預約是否同步。
    ◦ [ ] 權限異常：檢查共享清單是否有異常帳號。
    ◦ [ ] 備份狀態：檢查備份資料夾是否正常更新。
9.2 歸檔  SOP
• 目的： 保持「後台資訊系統」的運作效能。
• SOP：
    1. 時機： 每年指定日期（例如：Q1 財報關帳後）。
    2. 執行者： 執行長  。
    3. 行動：
        ▪ 在 後台資訊系統 中，將「去年」的客戶專案紀錄（例如 V9_Studio_Jobs 工作表），複製到一個「[系統名稱]封存[YYYY]」的全新 Google Sheet 中。
        ▪ 確認 100% 複製成功後，刪除「正式環境」中已封存的舊資料，以維持系統效能。